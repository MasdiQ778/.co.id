<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pesan Produk - DQ STORE</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="hero small">
    <div class="hero-content">
      <h1>Form Pemesanan</h1>
      <p>Silakan isi data di bawah untuk memulai top up.</p>
    </div>
  </header>

  <section class="form-section">
    <form id="orderForm">
      <label>Kategori:</label>
      <select id="kategori" required>
        <option value="">-- Pilih --</option>
        <option value="game">Game</option>
        <option value="pulsa">Pulsa</option>
        <option value="voucher">Voucher</option>
        <option value="tagihan">Tagihan</option>
      </select>

      <label>ID Pengguna / Nomor HP:</label>
      <input type="text" id="userId" placeholder="Contoh: 6281234567890" required>

      <label>Nominal:</label>
      <select id="nominal" required>
        <option value="">-- Pilih Nominal --</option>
        <option value="5000">Rp 5.000</option>
        <option value="10000">Rp 10.000</option>
        <option value="20000">Rp 20.000</option>
        <option value="50000">Rp 50.000</option>
      </select>

      <label>Metode Pembayaran:</label>
      <select id="metode" required>
        <option value="qris">QRIS</option>
        <option value="dana">DANA</option>
        <option value="ovo">OVO</option>
        <option value="gopay">GoPay</option>
      </select>

      <button type="submit" class="btn-primary">Kirim Pesanan</button>
    </form>

    <div id="response" class="response-box"></div>
  </section>

  <footer>
    <p>&copy; 2025 DQ STORE. All rights reserved.</p>
  </footer>

  <script>
    const form = document.getElementById('orderForm');
    const responseBox = document.getElementById('response');

    form.addEventListener('submit', async function(e) {
      e.preventDefault();
      const data = {
        kategori: kategori.value,
        userId: userId.value,
        nominal: nominal.value,
        metode: metode.value,
        api_key: "API_KEY_KAMU" // Ganti dengan API Key asli
      };

      responseBox.innerHTML = "Mengirim pesanan...";

      try {
        const res = await fetch("https://api.bukaolshop.site/pesan", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        const json = await res.json();
        if (json.status === "success") {
          responseBox.innerHTML = `<p class="success">✅ Pesanan berhasil dibuat! ID: ${json.transaksi_id}</p>`;
        } else {
          responseBox.innerHTML = `<p class="error">❌ Gagal: ${json.message}</p>`;
        }
      } catch (err) {
        responseBox.innerHTML = `<p class="error">Terjadi kesalahan: ${err.message}</p>`;
      }
    });
  </script>
</body>
</html>
